// Copyright (c) 2014 Ryan S Mullins <ryan@ryanmullins.org>
// Licensed under the MIT Software License
!function(e,n,t){"use strict";function i(e,n){var i;return n.type&&("pan"===n.type&&(i=new t.Pan(n)),"pinch"===n.type&&(i=new t.Pinch(n)),"press"===n.type&&(i=new t.Press(n)),"rotate"===n.type&&(i=new t.Rotate(n)),"swipe"===n.type&&(i=new t.Swipe(n)),"tap"===n.type&&(i=new t.Tap(n))),e&&i?(e.add(i),i):void 0}function o(e,n){var t=e.get(n.type);t||(t=i(e,n)),n&&(n.directions&&(n.direction=a(n.directions)),t.set(n)),n.recognizeWith&&t.recognizeWith(n.recognizeWith),n.dropRecognizeWith&&t.dropRecognizeWith(n.dropRecognizeWith),n.requireFailure&&t.requireFailure(n.requireFailure),n.dropRequireFailure&&t.dropRequireFailure(n.dropRequireFailure)}function a(e){var i=0;return n.forEach(e.split("|"),function(e){t.hasOwnProperty(e)&&(i|=t[e])}),i}var r=["hmCustom:custom","hmPan:pan","hmPanstart:panstart","hmPanmove:panmove","hmPanend:panend","hmPancancel:pancancel","hmPanleft:panleft","hmPanright:panright","hmPanup:panup","hmPandown:pandown","hmPinch:pinch","hmPinchstart:pinchstart","hmPinchmove:pinchmove","hmPinchend:pinchend","hmPinchcancel:pinchcancel","hmPinchin:pinchin","hmPinchout:pinchout","hmPress:press","hmRotate:rotate","hmRotatestart:rotatestart","hmRotatemove:rotatemove","hmRotateend:rotateend","hmRotatecancel:rotatecancel","hmSwipe:swipe","hmSwipeleft:swipeleft","hmSwiperight:swiperight","hmSwipeup:swipeup","hmSwipedown:swipedown","hmTap:tap","hmDoubletap:doubletap"];n.module("hmTouchEvents",[]),n.forEach(r,function(e){var i=e.split(":"),a=i[0],r=i[1];n.module("hmTouchEvents").directive(a,["$parse","$window",function(e,i){return{restrict:"A",link:function(p,h,c){var m=c[a],s=e(m),u=function(e){var n=p.$root.$$phase,t=function(){s(p,{$event:e})};p[m]?p[m](e):"$apply"===n||"$digest"===n?t():p.$apply(t)},d=n.fromJson(c.hmManagerOptions),f=n.fromJson(c.hmRecognizerOptions),w=h.data("hammer");return t&&i.addEventListener?(w||(w=new t.Manager(h[0],d),h.data("hammer",w)),void("custom"===r?n.isArray(f)?n.forEach(f,function(e){o(w,e),w.on(e.event,u),p.$on("$destroy",function(){w.off(e.event,u)})}):n.isObject(f)&&(o(w,f),w.on(options.event,u),p.$on("$destroy",function(){w.off(options.event,u)})):(n.isArray(f)?n.forEach(f,function(e){r.indexOf(e.type)>-1&&o(w,e)}):n.isObject(f)&&r.indexOf(f.type)>-1&&o(w,f),w.on(r,u),p.$on("$destroy",function(){w.off(r,u)})))):("hmTap"===a&&h.bind("click",u),void("hmDoubleTap"===a&&h.bind("dblclick",u)))}}}])})}(window,window.angular,window.Hammer);