// ---- Angular Hammer ----
// Copyright (c) 2015 Ryan S Mullins <ryan@ryanmullins.org>
// Licensed under the MIT Software License
//
// modifications by James Wilson <me@unbui.lt>
//
!function(a,b,c){"use strict";function d(a,b){if(void 0===a||void 0===b)return null;var d;return d=b.indexOf("pan")>-1?new c.Pan:b.indexOf("pinch")>-1?new c.Pinch:b.indexOf("press")>-1?new c.Press:b.indexOf("rotate")>-1?new c.Rotate:b.indexOf("swipe")>-1?new c.Swipe:new c.Tap,a.add(d),d}function e(a,b){return a&&(b.preventGhosts=a.preventGhosts),b}function f(a){return a.indexOf("pan")>-1?"pan":a.indexOf("pinch")>-1?"pinch":a.indexOf("press")>-1?"press":a.indexOf("rotate")>-1?"rotate":a.indexOf("swipe")>-1?"swipe":a.indexOf("tap")>-1?"tap":"custom"}function g(a,b,c){if(null==a||null==b||null==b.type)return console.error("ERROR: Angular Hammer could not setup the recognizer. Values of the passed manager and options: ",a,b);var e=a.get(b.type);if(e||(e=d(a,b.type)),b.directions||("pan"===b.type||"swipe"===b.type?b.directions="DIRECTION_ALL":b.type.indexOf("left")>-1?b.directions="DIRECTION_LEFT":b.type.indexOf("right")>-1?b.directions="DIRECTION_RIGHT":b.type.indexOf("up")>-1?b.directions="DIRECTION_UP":b.type.indexOf("down")>-1?b.directions="DIRECTION_DOWN":b.directions=""),b.direction=h(b.directions),e.set(b),"string"==typeof b.recognizeWith){var f;null==a.get(b.recognizeWith)&&(f=d(a,b.recognizeWith)),null!=f&&e.recognizeWith(f)}if("string"==typeof b.dropRecognizeWith&&null!=a.get(b.dropRecognizeWith)&&e.dropRecognizeWith(a.get(b.dropRecognizeWith)),"string"==typeof b.requireFailure){var g;null==a.get(b.requireFailure)&&(g=d(a,{type:b.requireFailure})),null!=g&&e.requireFailure(g)}"string"==typeof b.dropRequireFailure&&null!=a.get(b.dropRequireFailure)&&e.dropRequireFailure(a.get(b.dropRequireFailure)),b.preventGhosts===!0&&null!=c&&i(c)}function h(a){var d=0;return b.forEach(a.split("|"),function(a){c.hasOwnProperty(a)&&(d|=c[a])}),d}function i(b){function c(a){for(var b=0;b<g.length;b++){var c=g[b][0],d=g[b][1];if(Math.abs(a.clientX-c)<h&&Math.abs(a.clientY-d)<h){a.stopPropagation(),a.preventDefault();break}}}function d(){g=[]}function e(){g.splice(0,1)}function f(a){if(a.touches.length-a.changedTouches.length<=0){var b=a.changedTouches[0];g.push([b.clientX,b.clientY]),setTimeout(e,i)}}if(b){var g=[],h=25,i=2500;"ontouchstart"in a&&(b[0].addEventListener("touchstart",d,!0),b[0].addEventListener("touchend",f,!0),b[0].addEventListener("click",c,!0),b[0].addEventListener("mouseup",c,!0))}}if("undefined"==typeof b)if("undefined"!=typeof require&&require)try{b=require("angular")}catch(j){return console.log("ERROR: Angular Hammer could not require() a reference to angular")}else{if("undefined"==typeof a.angular)return console.log("ERROR: Angular Hammer could not find or require() a reference to angular");b=a.angular}if("undefined"==typeof c)if("undefined"!=typeof require&&require)try{c=require("hammerjs")}catch(j){return console.log("ERROR: Angular Hammer could not require() a reference to Hammer")}else{if("undefined"==typeof a.Hammer)return console.log("ERROR: Angular Hammer could not find or require() a reference to Hammer");c=a.Hammer}var k=["hmCustom:custom","hmSwipe:swipe","hmSwipeleft:swipeleft","hmSwiperight:swiperight","hmSwipeup:swipeup","hmSwipedown:swipedown","hmPan:pan","hmPanstart:panstart","hmPanmove:panmove","hmPanend:panend","hmPancancel:pancancel","hmPanleft:panleft","hmPanright:panright","hmPanup:panup","hmPandown:pandown","hmPress:press","hmPressup:pressup","hmRotate:rotate","hmRotatestart:rotatestart","hmRotatemove:rotatemove","hmRotateend:rotateend","hmRotatecancel:rotatecancel","hmPinch:pinch","hmPinchstart:pinchstart","hmPinchmove:pinchmove","hmPinchend:pinchend","hmPinchcancel:pinchcancel","hmPinchin:pinchin","hmPinchout:pinchout","hmTap:tap","hmDoubletap:doubletap"],l="hmTouchEvents",m=b.module("hmTouchEvents",[]);m.provider(l,function(){var a=this,d=!1,e={},f={},g={};g[c.Tap.toString()]="tap",g[c.Pan.toString()]="pan",g[c.Pinch.toString()]="pinch",g[c.Press.toString()]="press",g[c.Rotate.toString()]="rotate",g[c.Swipe.toString()]="swipe",a.applyHammerPresets=function(){var a=c.defaults.preset;b.forEach(a,function(a){var c=g[a[0]],d=a[1];d&&c&&(e[c]=b.copy(d))})},a.addManagerOption=function(a,c){"object"==typeof a?b.extend(f,a):f[a]=c},a.addRecognizerOption=function(b,c){if(Array.isArray(b))for(var f=0;f<b.length;f++)a.addRecognizerOption(b[f]);else{if("object"==typeof b&&(c=b,b=c.type),"object"!=typeof c)throw Error(l+"Provider: recognizer value expected to be object");b?e[c.type]=c:d=c}},a.$get=function(){return{extendWithDefaultManagerOpts:function(a){"object"!=typeof a&&(a={});for(var c in f)a[c]||(a[c]=b.copy(f[c]));return b.extend({},f,a)},extendWithDefaultRecognizerOpts:function(a,c){if("object"!=typeof c&&(c=[]),Array.isArray(c)||(c=[c]),"custom"==a)return c;var f=e[a],g=b.extend({},d||{},c.reduce(function(a,c){return c.type?a:b.extend(a,c)},{}));c=c.filter(function(a){return"type"in a});var h=!1;return c=c.map(function(c){return c.type==a?(h=!0,b.extend({},g,f||{},c)):c}),h||c.push(b.extend({type:a},g,f||{})),c}}}}),b.forEach(k,function(a){var d=a.split(":"),h=d[0],i=d[1];m.directive(h,["$parse","$window",l,function(a,d,j){return{restrict:"A",link:function(k,m,n){if(!c||!d.addEventListener)throw Error(l+": window.Hammer or window.addEventListener not found, can't add event "+h);var o=m.data("hammer"),p=j.extendWithDefaultManagerOpts(k.$eval(n.hmManagerOptions)),q=f(i),r=j.extendWithDefaultRecognizerOpts(q,k.$eval(n.hmRecognizerOptions));o||(o=new c.Manager(m[0],p),m.data("hammer",o),k.$on("$destroy",function(){o.destroy()}));var s=n[h],t=a(s),u=function(a){function b(){var b=t(k,{$event:a});"function"==typeof b&&b.call(k,a)}var c=k.$root.$$phase,d=o.get(a.type);a.element=m,d&&(d.options.preventDefault&&a.preventDefault(),d.options.stopPropagation&&a.srcEvent.stopPropagation()),"$apply"===c||"$digest"===c?b():k.$apply(b)};b.forEach(r,function(a){if("custom"===q)i=a.event;else{if(q!==a.type)return;a.event&&delete a.event}"custom"!==q&&("hmDoubletap"===h&&(a.event=i,a.taps=2,o.get("tap")&&(a.recognizeWith="tap")),"pan"==a.type&&o.get("swipe")&&(a.recognizeWith="swipe"),"pinch"==a.type&&o.get("rotate")&&(a.recognizeWith="rotate")),g(o,e(p,a),m)}),o.on(i,u)}}}])})}(window,window.angular,window.Hammer);
//# sourceMappingURL=angular.hammer.min.js.map