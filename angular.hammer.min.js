// ---- Angular Hammer ----
// Copyright (c) 2015 Ryan S Mullins <ryan@ryanmullins.org>
// Licensed under the MIT Software License
//
// modifications by James Wilson <me@unbui.lt>
//
!function(a,b,c){"use strict";function d(a,b){if(void 0===a||void 0===b)return null;var d;return d=b.indexOf("pan")>-1?new c.Pan:b.indexOf("pinch")>-1?new c.Pinch:b.indexOf("press")>-1?new c.Press:b.indexOf("rotate")>-1?new c.Rotate:b.indexOf("swipe")>-1?new c.Swipe:new c.Tap,a.add(d),d}function e(a,b){return a&&(b.preventGhosts=a.preventGhosts),b}function f(a){return a.indexOf("pan")>-1?"pan":a.indexOf("pinch")>-1?"pinch":a.indexOf("press")>-1?"press":a.indexOf("rotate")>-1?"rotate":a.indexOf("swipe")>-1?"swipe":"tap"}function g(a,b,c){if(null==a||null==b||null==b.type)return console.error("ERROR: Angular Hammer could not setup the recognizer. Values of the passed manager and options: ",a,b);var e=a.get(b.type);if(e||(e=d(a,b.type)),b.directions||("pan"===b.type||"swipe"===b.type?b.directions="DIRECTION_ALL":b.type.indexOf("left")>-1?b.directions="DIRECTION_LEFT":b.type.indexOf("right")>-1?b.directions="DIRECTION_RIGHT":b.type.indexOf("up")>-1?b.directions="DIRECTION_UP":b.type.indexOf("down")>-1?b.directions="DIRECTION_DOWN":b.directions=""),b.direction=h(b.directions),e.set(b),"string"==typeof b.recognizeWith){var f;null==a.get(b.recognizeWith)&&(f=d(a,b.recognizeWith)),null!=f&&e.recognizeWith(f)}if("string"==typeof b.dropRecognizeWith&&null!=a.get(b.dropRecognizeWith)&&e.dropRecognizeWith(a.get(b.dropRecognizeWith)),"string"==typeof b.requireFailure){var g;null==a.get(b.requireFailure)&&(g=d(a,{type:b.requireFailure})),null!=g&&e.requireFailure(g)}"string"==typeof b.dropRequireFailure&&null!=a.get(b.dropRequireFailure)&&e.dropRequireFailure(a.get(b.dropRequireFailure)),b.preventGhosts===!0&&null!=c&&i(c)}function h(a){var d=0;return b.forEach(a.split("|"),function(a){c.hasOwnProperty(a)&&(d|=c[a])}),d}function i(b){function c(a){for(var b=0;b<g.length;b++){var c=g[b][0],d=g[b][1];if(Math.abs(a.clientX-c)<h&&Math.abs(a.clientY-d)<h){a.stopPropagation(),a.preventDefault();break}}}function d(){g=[]}function e(){g.splice(0,1)}function f(a){if(a.touches.length-a.changedTouches.length<=0){var b=a.changedTouches[0];g.push([b.clientX,b.clientY]),setTimeout(e,i)}}if(b){var g=[],h=25,i=2500;"ontouchstart"in a&&(b[0].addEventListener("touchstart",d,!0),b[0].addEventListener("touchend",f,!0),b[0].addEventListener("click",c,!0),b[0].addEventListener("mouseup",c,!0))}}if("undefined"==typeof b)if("undefined"!=typeof require&&require)try{b=require("angular")}catch(j){return console.log("ERROR: Angular Hammer could not require() a reference to angular")}else{if("undefined"==typeof a.angular)return console.log("ERROR: Angular Hammer could not find or require() a reference to angular");b=a.angular}if("undefined"==typeof c)if("undefined"!=typeof require&&require)try{c=require("hammerjs")}catch(j){return console.log("ERROR: Angular Hammer could not require() a reference to Hammer")}else{if("undefined"==typeof a.Hammer)return console.log("ERROR: Angular Hammer could not find or require() a reference to Hammer");c=a.Hammer}var k=["hmCustom:custom","hmSwipe:swipe","hmSwipeleft:swipeleft","hmSwiperight:swiperight","hmSwipeup:swipeup","hmSwipedown:swipedown","hmPan:pan","hmPanstart:panstart","hmPanmove:panmove","hmPanend:panend","hmPancancel:pancancel","hmPanleft:panleft","hmPanright:panright","hmPanup:panup","hmPandown:pandown","hmPress:press","hmPressup:pressup","hmRotate:rotate","hmRotatestart:rotatestart","hmRotatemove:rotatemove","hmRotateend:rotateend","hmRotatecancel:rotatecancel","hmPinch:pinch","hmPinchstart:pinchstart","hmPinchmove:pinchmove","hmPinchend:pinchend","hmPinchcancel:pinchcancel","hmPinchin:pinchin","hmPinchout:pinchout","hmTap:tap","hmDoubletap:doubletap"],l="hmTouchEvents",m=b.module("hmTouchEvents",[]);m.provider(l,function(){var a=this,d=!1,e={},g={},h={};h[c.Tap.toString()]="tap",h[c.Pan.toString()]="pan",h[c.Pinch.toString()]="pinch",h[c.Press.toString()]="press",h[c.Rotate.toString()]="rotate",h[c.Swipe.toString()]="swipe",a.applyHammerPresets=function(){var a=c.defaults.preset;b.forEach(a,function(a){var c=h[a[0]],d=a[1];d&&c&&(e[c]=b.copy(d))})},a.addManagerOption=function(a,c){"object"==typeof a?b.extend(g,a):g[a]=c},a.addRecognizerOption=function(b,c){if(Array.isArray(b))for(var f=0;f<b.length;f++)a.addRecognizerOption(b[f]);else{if("object"==typeof b&&(c=b,b=c.type),"object"!=typeof c)throw Error(l+"Provider: recognizer value expected to be object");b?e[c.type]=c:d=c}},a.$get=function(){return{extendWithDefaultManagerOpts:function(a){"object"!=typeof a&&(a={});for(var c in g)a[c]||(a[c]=b.copy(g[c]));return b.extend({},g,a)},extendWithDefaultRecognizerOpts:function(a,c){var g=f(a);if("undefined"==typeof c?c=[]:Array.isArray(c)||(c=[c]),"custom"==g)return c;var h=e[g],i=b.extend({},d||{},c.reduce(function(a,c){return c.type?a:b.extend(a,c)},{}));return c.length?c.map(function(a){return a.type?a.type==g?b.extend({},i,h||{},a):a:!1}).filter(b.identity):[b.extend({type:g},i,h||{})]}}}}),b.forEach(k,function(a){var d=a.split(":"),f=d[0],h=d[1];m.directive(f,["$parse","$window",l,function(a,d,i){return{restrict:"A",link:function(j,k,m){if(!c||!d.addEventListener)throw Error(l+": window.Hammer or window.addEventListener not found, can't add event "+f);var n=k.data("hammer"),o=i.extendWithDefaultManagerOpts(j.$eval(m.hmManagerOptions)),p=i.extendWithDefaultRecognizerOpts(h,j.$eval(m.hmRecognizerOptions));n||(n=new c.Manager(k[0],o),k.data("hammer",n),j.$on("$destroy",function(){n.destroy()}));var q=m[f],r=a(q),s=function(a){function b(){var b=r(j,{$event:a});"function"==typeof b&&b.call(j,a)}var c=j.$root.$$phase,d=n.get(a.type);a.element=k,d&&(d.options.preventDefault&&a.preventDefault(),d.options.stopPropagation&&a.srcEvent.stopPropagation()),"$apply"===c||"$digest"===c?b():j.$apply(b)};b.forEach(p,function(a){if("hmCustom"===f)h=a.event;else{if(-1==h.indexOf(a.type||""))return;a.event&&delete a.event}"hmCustom"!==f&&("hmDoubletap"===f&&(a.event=h,a.taps=2,n.get("tap")&&(a.recognizeWith="tap")),a.type.indexOf("pan")>-1&&n.get("swipe")&&(a.recognizeWith="swipe"),a.type.indexOf("pinch")>-1&&n.get("rotate")&&(a.recognizeWith="rotate")),g(n,e(o,a),k)}),p.length&&n.on(h,s)}}}])})}(window,window.angular,window.Hammer);
//# sourceMappingURL=angular.hammer.min.js.map