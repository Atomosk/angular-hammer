// ---- Angular Hammer ----
// Copyright (c) 2014 Ryan S Mullins <ryan@ryanmullins.org>
// Licensed under the MIT Software License
!function(a,b,c){"use strict";function d(a,b){if(void 0===a||void 0===b)return null;var d;return d=b.indexOf("pan")>-1?new c.Pan:b.indexOf("pinch")>-1?new c.Pinch:b.indexOf("press")>-1?new c.Press:b.indexOf("rotate")>-1?new c.Rotate:b.indexOf("swipe")>-1?new c.Swipe:new c.Tap,a.add(d),d}function e(a,b){return a&&(b.preventGhosts=a.preventGhosts),b}function f(a){return a.indexOf("pan")>-1?"pan":a.indexOf("pinch")>-1?"pinch":a.indexOf("press")>-1?"press":a.indexOf("rotate")>-1?"rotate":a.indexOf("swipe")>-1?"swipe":"tap"}function g(a,b,c){if(null==a||null==b||null==b.type)return console.error("ERROR: Angular Hammer could not setup the recognizer. Values of the passed manager and options: ",a,b);var e=a.get(b.type);if(e||(e=d(a,b.type)),b.directions||("pan"===b.type||"swipe"===b.type?b.directions="DIRECTION_ALL":b.type.indexOf("left")>-1?b.directions="DIRECTION_LEFT":b.type.indexOf("right")>-1?b.directions="DIRECTION_RIGHT":b.type.indexOf("up")>-1?b.directions="DIRECTION_UP":b.type.indexOf("down")>-1?b.directions="DIRECTION_DOWN":b.directions=""),b.direction=h(b.directions),e.set(b),"string"==typeof b.recognizeWith){var f;null==a.get(b.recognizeWith)&&(f=d(a,b.recognizeWith)),null!=f&&e.recognizeWith(f)}if("string"==typeof b.dropRecognizeWith&&null!=a.get(b.dropRecognizeWith)&&e.dropRecognizeWith(a.get(b.dropRecognizeWith)),"string"==typeof b.requireFailure){var g;null==a.get(b.requireFailure)&&(g=d(a,{type:b.requireFailure})),null!=g&&e.requireFailure(g)}"string"==typeof b.dropRequireFailure&&null!=a.get(b.dropRequireFailure)&&e.dropRequireFailure(a.get(b.dropRequireFailure)),b.preventGhosts===!0&&null!=c&&i(c)}function h(a){var d=0;return b.forEach(a.split("|"),function(a){c.hasOwnProperty(a)&&(d|=c[a])}),d}function i(b){function c(a){for(var b=0;b<g.length;b++){var c=g[b][0],d=g[b][1];if(Math.abs(a.clientX-c)<h&&Math.abs(a.clientY-d)<h){a.stopPropagation(),a.preventDefault();break}}}function d(){g=[]}function e(){g.splice(0,1)}function f(a){if(a.touches.length-a.changedTouches.length<=0){var b=a.changedTouches[0];g.push([b.clientX,b.clientY]),setTimeout(e,i)}}if(b){var g=[],h=25,i=2500;"ontouchstart"in a&&(b[0].addEventListener("touchstart",d,!0),b[0].addEventListener("touchend",f,!0),b[0].addEventListener("click",c,!0),b[0].addEventListener("mouseup",c,!0))}}if("undefined"==typeof b)if("undefined"!=typeof require&&require)try{b=require("angular")}catch(j){return console.log("ERROR: Angular Hammer could not require() a reference to angular")}else{if("undefined"==typeof a.angular)return console.log("ERROR: Angular Hammer could not find or require() a reference to angular");b=a.angular}if("undefined"==typeof c)if("undefined"!=typeof require&&require)try{c=require("hammerjs")}catch(j){return console.log("ERROR: Angular Hammer could not require() a reference to Hammer")}else{if("undefined"==typeof a.Hammer)return console.log("ERROR: Angular Hammer could not find or require() a reference to Hammer");c=a.Hammer}var k=["hmCustom:custom","hmSwipe:swipe","hmSwipeleft:swipeleft","hmSwiperight:swiperight","hmSwipeup:swipeup","hmSwipedown:swipedown","hmPan:pan","hmPanstart:panstart","hmPanmove:panmove","hmPanend:panend","hmPancancel:pancancel","hmPanleft:panleft","hmPanright:panright","hmPanup:panup","hmPandown:pandown","hmPress:press","hmPressup:pressup","hmRotate:rotate","hmRotatestart:rotatestart","hmRotatemove:rotatemove","hmRotateend:rotateend","hmRotatecancel:rotatecancel","hmPinch:pinch","hmPinchstart:pinchstart","hmPinchmove:pinchmove","hmPinchend:pinchend","hmPinchcancel:pinchcancel","hmPinchin:pinchin","hmPinchout:pinchout","hmTap:tap","hmDoubletap:doubletap"],l=b.module("hmTouchEvents",[]);l.provider(NAME,function(){var a=this,d=!1,e={},g={};a.applyHammerPresets=function(){c(document.createElement("i"));var a=c.defaults.preset;b.forEach(a,function(a){var b=a[1];if(b){var c=b.event;if(b.type=c,!c)throw Error(NAME+"Provider: useHammerPresets: preset event expected by now");e[c]=b}})},a.addManagerOption=function(a,c){"object"==typeof a?b.extend(g,a):g[a]=c},a.addRecognizerOption=function(b,c){if(Array.isArray(b))for(var f=0;f<b.length;f++)a.addRecognizerOption(b[f]);else{if("object"==typeof b&&(c=b,b=c.type),"object"!=typeof c)throw Error(NAME+"Provider: recognizer value expected to be object");b?e[c.type]=c:d=c}},a.$get=function(){return{extendWithDefaultManagerOpts:function(a){"object"!=typeof a&&(a={});for(var c in g)a[c]||(a[c]=b.copy(g[c]));return b.extend({},g,a)},extendWithDefaultRecognizerOpts:function(a,c){var g=f(a);if("custom"==g)return c;var h=e[g],i=d;return h||i?c?(Array.isArray(c)||(c=[c]),c=c.map(function(a){return!a.type&&i?b.extend({},i,a):a.type==g?b.extend({},i,h,a):void 0})):b.extend({type:g},i||{},h||{}):c}}}}),b.forEach(k,function(a){var d=a.split(":"),h=d[0],i=d[1];l.directive(h,["$parse","$window",l,function(a,d,j){return{restrict:"A",link:function(k,l,m){if(!c||!d.addEventListener)return"hmTap"===h&&l.bind("click",s),void("hmDoubletap"===h&&l.bind("dblclick",s));var n=l.data("hammer"),o=j.extendWithDefaultManagerOpts(k.$eval(m.hmManagerOptions)),p=j.extendWithDefaultRecognizerOpts(i,k.$eval(m.hmRecognizerOptions));n||(n=new c.Manager(l[0],o),l.data("hammer",n),k.$on("$destroy",function(){n.destroy()}));var q=m[h],r=a(q),s=function(a){function b(){var b=r(k,{$event:a});"function"==typeof b&&b.call(k,a)}var c=k.$root.$$phase,d=n.get(a.type);a.element=l,d&&(d.options.preventDefault&&a.preventDefault(),d.options.stopPropagation&&a.srcEvent.stopPropagation()),"$apply"===c||"$digest"===c?b():k.$apply(b)};b.isArray(p)?b.forEach(p,function(a){"hmCustom"===h?i=a.event:(a.type||(a.type=f(i)),a.event&&delete a.event),("hmCustom"===h||i.indexOf(a.type)>-1)&&g(n,e(o,a),l)}):b.isObject(p)?("hmCustom"===h?i=p.event:(p.type||(p.type=f(i)),p.event&&delete p.event),("hmCustom"===h||i.indexOf(p.type)>-1)&&g(n,e(o,p),l)):"hmCustom"!==h?(p={type:f(i)},"hmDoubletap"===h&&(p.event=i,p.taps=2,n.get("tap")&&(p.recognizeWith="tap")),p.type.indexOf("pan")>-1&&n.get("swipe")&&(p.recognizeWith="swipe"),p.type.indexOf("pinch")>-1&&n.get("rotate")&&(p.recognizeWith="rotate"),g(n,e(o,p),l)):i=null,i&&n.on(i,s)}}}])})}(window,window.angular,window.Hammer);
//# sourceMappingURL=angular.hammer.min.js.map